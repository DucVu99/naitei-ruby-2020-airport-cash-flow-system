<div class="card">
  <div class="card-header" id="card-header-request">
    <h2 class="card-title text-center col-12 font-weight-bold" id="card-title-request">
      <%= t ".request_detail" %>
    </h2>
  </div>
  <div class="card-body" id="card-body-request">
    <div class="row request-row">
      <div class="col-3">
        <div class="font-weight-bold">
          <%= t ".requestor" %>
        </div>
      </div>
      <div class="col-9">
        <%= request.user_name %>
      </div>
    </div>
    <div class="row request-row">
      <div class="col-3">
        <div class="font-weight-bold">
          <%= t ".title" %>
        </div>
      </div>
      <div class="col-9">
        <%= request.title %>
      </div>
    </div>
    <div class="row request-row">
      <div class="col-3">
        <div class="font-weight-bold">
          <%= t ".content" %>
        </div>
      </div>
      <div class="col-9">
        <%= request.content %>
      </div>
    </div>
    <div class="row request-row">
      <div class="col-3">
        <div class="font-weight-bold">
          <%= t ".status" %>
        </div>
      </div>
      <div class="col-9" id="req_status_name">
        <small class="badge badge-<%= modify_label_color request.status_name.parameterize.underscore.to_sym %>" style="text-decoration: <%= request.status_name == "canceled"? "line-through" : "none" %>;">
          <%= t ".#{request.status_name}" %>
        </small>
      </div>
    </div>
    <div class="row request-row">
      <div class="col-3">
        <div class="font-weight-bold">
          <%= t ".sum" %>
        </div>
      </div>
      <div class="col-9">
        <%= number_to_currency sum_amount(request).values[0], unit: "" %>
      </div>
    </div>
    <div class="row request-row">
      <div class="col-3">
        <div class="font-weight-bold">
          <%= t ".currency" %>
        </div>
      </div>
      <div class="col-9">
        <%= request.currency %>
      </div>
    </div>
    <div class="request-details">
      <h3 class="text-center mt-4 mb-3">
        <%= t ".details" %>
      </h3>
      <table class="table table-hover table-bordered table-striped">
        <thead lass="text-nowrap">
          <tr>
            <th>
              <label for="department">
                <%= t ".section" %>
              </label>
            </th>
            <th>
              <label for="description">
                <%= t ".des" %>
              </label>
            </th>
            <th>
              <label for="money_amount">
                <%= t ".amount" %>
              </label>
            </th>
          </tr>
        </thead>
        <tbody>
          <% request.request_details.each do |req| %>
            <tr>
              <td>
                <%= req.section_name %>
              </td>
              <td>
                <%= req.description %>
              </td>
              <td>
                <%= number_to_currency req.amount %>
              </td>
            </tr>
          <% end %>
        </tbody>
      </table>
    </div>
  </div>
  <div class="card-footer">
    <div class="row request-row">
      <div class="col-6">
        <div class="mr-auto">
          <% if check_requests %>
            <%= link_to t(".go_back"), manager_requests_path, class: "btn btn-primary" %>
          <% else %>
            <%= link_to t(".go_back"), requests_path, class: "btn btn-primary" %>
          <% end %>
        </div>
      </div>
      <div class="col-6">
        <div class="float-right inline">
          <% if check_requests && request.is_pending? %>
            <%= link_to  "#", class: "btn btn-danger mr-2", id: "reject_btn", data: {toggle: "modal", target: "#rejectConfirmModal"} do %>
              <%= t ".reject" %>
            <% end %>

            <!-- Modal -->
            <%= render "shared/modal/reject_modal", manager: :manager, request: request %>
            <%= link_to "#", class: "btn btn-success mr-2", id: "approve_btn", data: {toggle: "modal", target: "#approveConfirmModal"} do %>
              <%= t ".approve" %>
            <% end %>

            <!-- Modal -->
            <%= render "shared/modal/approve_modal", manager: :manager, request: request %>
          <% end %>
          <% unless check_requests %>
            <%= link_to t(".cancel"), "#", class: "btn btn-secondary mr-2" %>
            <%= link_to t(".edit"), "#", class: "btn btn-primary mr-2" %>
          <% end %>
        </div>
      </div>
    </div>
  </div>
  <div class="d-none">
    <small id='reject-label' class='badge badge-danger' style='text-decoration: none;'><%= t ".rejected" %></small>
    <small id='approve-label' class='badge badge-success' style='text-decoration: none;'><%= t ".approved" %></small>
  </div>
</div>
