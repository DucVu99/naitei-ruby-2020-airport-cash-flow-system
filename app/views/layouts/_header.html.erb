<!-- Navbar -->
<nav class="main-header navbar navbar-expand navbar-white navbar-light">
  <!-- Left navbar links -->
  <ul class="navbar-nav">
    <li class="nav-item">
      <%= link_to "#", class: "nav-link", data: {widget: "pushmenu"}, role: "button" do %>
        <i class="fas fa-bars"></i>
      <% end %>
    </li>
  </ul>
  <!-- Right navbar links -->
  <ul class="navbar-nav ml-auto">
    <li class="nav-item dropdown">
      <%= link_to notifications_path, remote: true, class: "nav-link", data: {toggle: "dropdown", type: "script"} do %>
        <i class="fas fa-bell"></i>
        <span class="badge badge-warning navbar-badge <%= Notification.for_user(current_user.id) == 0 ? "d-none" : "" %>" id="unviewed-notification">
          <%= Notification.for_user current_user.id %>
        </span>
      <% end %>
      <div class="dropdown-menu dropdown-menu-lg dropdown-menu-right">
        <div class="dropdown-item d-flex justify-content-between">
          <span><%= t ".notify" %></span>
          <%= link_to mark_all_as_read_path, remote: true, method: :patch, class: "text-decoration-none text-muted text-sm" do %>
            <%= t ".mark_all_as_read" %>
          <% end %>
        </div>
        <div class="dropdown-divider"></div>
        <div id="notification-content" class="nottify-scrollbar">
          <% if current_user.notifications_unviewed.blank? %>
            <span class="dropdown-item text-center">
              <%= t ".empty_notification" %>
            </span>
          <% else %>
            <div class="nottify-scrollbar">
              <%= render_notifications current_user.notifications_unviewed.lastest %>
            </div>
          <% end %>
        </div>
      </div>
    </li>
    <li class="nav-item dropdown mr-3">
      <%= link_to "#", class: "nav-link", data: {toggle: "dropdown"} do %>
        <i class="fas fa-cog"></i>
      <% end %>
      <div class="dropdown-menu dropdown-menu-right">
        <%= link_to "#", class: "dropdown-item" do %>
          <i class="fas fa-cog"></i>
          <span class="text-sm"><%= t ".setting" %></span>
        <% end %>
        <div class="dropdown-divider"></div>
        <%= link_to destroy_user_session_path, { class: "dropdown-item", method: :delete } do%>
          <i class="fas fa-sign-out-alt"></i>
          <span class="text-sm"><%= t ".sign_out" %></span>
        <% end %>
      </div>
    </li>
    <li class="nav-item dropdown">
      <button class="btn btn-secondary btn-sm dropdown-toggle" type="button" id="dropdownMenuButton" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
        <i class="fa fa-globe"></i>
      </button>
      <div class="dropdown-menu dropdown-menu-right">
        <%= link_to url_for( :locale => "en" ), {class: "dropdown-item"} do %>
          <%= image_tag "en.png" %>
          <span class="ml-2"><%= t ".english" %></span>
        <% end %>
        <%= link_to url_for( :locale => "vi" ), {class: "dropdown-item"} do %>
          <%= image_tag "vi.png" %>
          <span class="ml-2"><%= t ".vietnamese" %></span>
        <% end %>
      <div>
    </li>
  </ul>
</nav>
